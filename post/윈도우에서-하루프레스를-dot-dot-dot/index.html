<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>윈도우에서 하루프레스를... |  Juhoi's Haroopress</title>
    <meta name="description" content="My Blog, I love programming">
    <meta name="author" content="Juhoi Kim">
    <meta name="keywords" content="JavaScript,Node.js,Meteor,Python,Django" />
    <meta name="generator" content="haroopress v0.9.2" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/rss.xml" rel="alternate" title="Juhoi's Haroopress" type="application/rss+xml">

    <!-- Le styles -->
    <link rel="canonical" href="http://juhoi.github.io">

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/font-awesome.css" rel="stylesheet">
    <link href="/css/markdown.css" rel="stylesheet">
    <link href="/css/haroopress.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/code/default.css" rel="stylesheet">
    
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon-64.png">

    <!-- Le javascript -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.jsonp.js"></script>
    <script src="/js/mustache.js"></script>
    <script src="/js/apps/github.js"></script>
    <script src="/js/apps/twitter.js"></script>
</head>
<body data-spy="scroll" data-target=".subnav" data-offset="50">

        <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>

          <a class="pull-right" href="/rss.xml"><span class="icon-rss"></span></a>
          
            <a class="pull-right" href="http://twitter.com/ByJuhoi" target="_blank"><span class="icon-twitter"></span></a>
          

          <div class="nav-collapse">
            <ul class="nav">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/archives">Archives</a>
              </li>
              <li>
                <a href="/category">Categories</a>
              </li>
              <li>
                <a href="/about">About</a>
              </li>
              <!--li>
                <a href="/slides">Slides</a>
              </li-->
                
            </ul>
          </div>
        </div>
      </div>
    </div>

    
<link href="/css/code/default.css" rel="stylesheet">
<div class="container page-archive">
    <div class="row">
        <div class="span9">
            <div class="row">
                <div class="span9">
                    <div class="well bg">
                        
                        <div class="page-header">
                            <h1>윈도우에서 하루프레스를...</h1>
                            <span class="pull-right">Friday, July 4 2014 4:43 AM</span>
                        </div>

                        <div class="pull-right social-area">
                                                
                            <a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-text="윈도우에서 하루프레스를... -" data-url="http://juhoi.github.io/post/윈도우에서-하루프레스를-dot-dot-dot" data-via="ByJuhoi">Tweet</a>
                            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    
                                                

                            
        <div class="fb-like" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false" data-font="arial" data-href="http://juhoi.github.io/post/윈도우에서-하루프레스를-dot-dot-dot"></div>
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/ko_KR/all.js#xfbml=1&appId=246177242115486";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

                        </div>

                        <div class="markdown-wrapper">
                            <p>블로그에 무언가 끄적인게 언제인지 기억도 나지 않으려 한다.
끄적일만한 것이 없으니 당연하겠지.
언제나 개발자이고 싶고... 프로그래머이고 싶지만... 놓고싶지 않은 현실은 그렇지 못하니...</p><p>어쨌든 이대로 방치하지는 말자는 생각에 하루프레스를 정비했다. 한참을 했다. ㅡㅡ;;
윈도우 사용자라서 그동안 개인적으로 쓰던 우분투에 하루프레스를 올려 쓰고 있었는데,
관심을 두지 않고 있는 사이 우분투가 맛이 갔다. 부팅이 되지 않는다. 된장~</p><p>뭐, 다시 설치해서 해야지... 했는데... Github 에는 html 페이지 밖에 없다.
그렇다. 작성해 놓은 마크다운 문서가 없다.
제발 디스크는 멀쩡하기를 바라면서 다른 PC에 슬래이브로 물리고, 리눅스 파티션 인식을 위해
<a href="http://www.chrysocome.net/explore2fs">explore2fs</a>를 설치했다. 다행이 살아있어 윈도우로 복사했다.</p><p>잠깐 고민했다. 하루프레스를 <a href="https://c9.io">cloud9</a>이나 <a href="https://www.nitrous.io">Nitrous</a> 같은 클라우드에 올려서 쓸까... 하다가 이참에 그냥 윈도우에서 돌려보기로 했다.
결론적으로 이글을 윈도우에서 작성하고 있는데... 여러 삽질이 필요했다. 
그럴 줄 알았으면 정리를 좀 해가며 하는건데, 그러지 못해서 기억을 더듬고 있다.</p>
<h2 id="toc_70">기본 요구사항</h2>

<h3 id="toc_71">Node.js</h3>
<p>설치되어 있다. 버전은 v0.10.26</p>
<h3 id="toc_72">Git</h3>
<p><a href="http://msysgit.github.io/">윈도우에 git</a>은 설치돼 있다. 주로 git-sh 에서 작업을 했다.</p>
<h2 id="toc_73">하루프레스 설치</h2>

<h3 id="toc_74">소스 복제</h3>
<p>혹시나 하여 하루프레스 저장소에서 드랍박스 폴더로 클론했다.</p><pre><code class="bash">$ git clone git@github<span class="preprocessor">.com</span>:rhiokim/haroopress<span class="preprocessor">.git</span> /d/dropbox/juhoi<span class="preprocessor">.github</span><span class="preprocessor">.com</span>
</code></pre><p>git-sh 에서는 윈도우의 D 드라이브를 <code>/d/</code>로 표시한다.</p>
<h3 id="toc_75">설치 및 초기화</h3>
<p>&quot;얼래? git-sh 에 make 가 없네&quot; 맥이나 리눅스에서는 <code>make init</code> 한방이면 끝났을 일이다.
<code>make</code>를 찾아 설치할까 하다가 귀찮아서... 그냥 해당 JS 스크립트를 직접 실행하거나 별도 쉘 스크립트를 만들어서 실행했다.</p><p>Makefile을 보면 <code>init</code> 은 <code>initialize, setup, gh-pages, init-data</code> 4가지 작업으로 볼 수 있다.
우선 <code>initialize</code>를 각각 쉘에서 실행했다.</p><pre><code class="bash"><span class="comment">$</span> <span class="comment">npm</span> <span class="comment">install</span> <span class="literal">-</span><span class="comment">g</span> <span class="comment">node</span><span class="literal">-</span><span class="comment">gyp</span>
<span class="comment">$</span> <span class="comment">git</span> <span class="comment">submodule</span> <span class="comment">update</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">init</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">recursive</span>
<span class="comment">$</span> <span class="comment">cd</span> <span class="string">.</span><span class="comment">/node_modules/robotskirt;node</span><span class="literal">-</span><span class="comment">gyp</span> <span class="comment">rebuild</span>
<span class="comment">$</span> <span class="comment">cd</span> <span class="string">.</span><span class="comment">/node_modules/locally/;npm</span> <span class="comment">install</span>
</code></pre><p>윈도우에서 <code>node-gyp</code>를 사용하기 위해서는 2점대 버전의 파이썬이 필요하다. 미리 설치가 되어 있어야 한다.
2.7.3 버전의 파이썬을 설치하여 다시 실행했다.</p><p>다음은 <code>setup, gh-pages, init-data</code>. 역시 쉘에서 직접 실행했고 문제없이 진행됐다.</p><pre><code class="bash">$ ./bin/<span class="transposed_variable">setup.</span>js
$ <span class="built_in">cd</span> ./bin/; ./gh-<span class="transposed_variable">pages.</span>js; <span class="built_in">cd</span> ..
$ ./bin/<span class="transposed_variable">init.</span>js
</code></pre>
<h3 id="toc_76">정적 페이지 생성</h3>
<p>큰 문제 없이 배포용 Github 저장소까지 셋팅이 됐다. 이제 정적 페이지를 생성해 보자.
기존 우분투에서 복사한 마크다운 문서를 <code>./source/data/articles</code>에 복사한 후 다음과 같이 쉘 스크립트를 생성했다.
Makefile의 <code>gen</code> 태스크를 그대로 옮겼다고 보면 된다.</p><pre><code class="bash"><span class="shebang">#!/bin/sh
</span>
SOURCE_DIR=./<span class="built_in">source</span>/public
DEPLOY_DIR=./_deploy
PUBLIC_DIR=./_public

./bin/clear.js
./bin/gen.js
mkdir -p <span class="variable">${PUBLIC_DIR}</span>/slides/@asserts
cp -R ./lib/shower/themes <span class="variable">${PUBLIC_DIR}</span>/slides/@asserts
cp -R ./lib/shower/scripts <span class="variable">${PUBLIC_DIR}</span>/slides/@assert
cp -R ./lib/bootstrap/* <span class="variable">${PUBLIC_DIR}</span>
</code></pre><p>이부분에서 무슨 문제가 있었던 것 같은데 기억이 잘 안난다 ㅜㅜ;; 큰 문제는 아니었을 듯...</p>
<h3 id="toc_77">미리보기 및 배포</h3>
<p>정적 페이지가 생성이 됬으면, Github 으로 배포하기 전에 로컬에서 미리보기를 할 수 있다.
<code>./bin/preview.js</code>가 실행이 되는데, <code>locally</code>로 웹서버를 띄우고 브라우저를 실행하게 된다.
이부분이 윈도우에서 정상적이지 않아서 웹서버를 띄우는 부분과 브라우저를 실행하는 부분을 별도로 처리했다.
<code>.bashrc</code> 파일에 다음과 같이 <code>local</code>이라는 별칭을 만들어 웹서버를 띄웠다.</p><pre><code class="bash"><span class="comment">alias</span> <span class="comment">local='locally</span> <span class="literal">-</span><span class="comment">w</span> <span class="string">.</span><span class="comment">/_public</span> <span class="literal">-</span><span class="comment">p</span> <span class="comment">8080</span> &gt; <span class="string">.</span><span class="comment">stout</span> <span class="comment">2</span>&gt; <span class="string">.</span><span class="comment">sterr</span> <span class="comment">&amp;'</span>
</code></pre><p>곧바로 브라우저를 실행하기 위해 웹서버는 백그라운드로 실행하고 표준출력과 표준에러는 리다이렉트 시켰다.
그리고, 다음과 같은 쉘 스크립트로 브라우저를 실행했다.</p><pre><code class="bash"><span class="shebang">#!/bin/sh
</span>
/c/Users/Administrator/AppData/Local/Google/Chrome/Application/chrome.exe http://localhost:<span class="number">8080</span>
</code></pre><p>확인 후에는 <code>fg</code> 명령으로 실행중인 웹서버를 포그라운드로 전환하고 <code>^C</code>로 종료한다.
마지막으로 Github 으로 배포. <code>./bin/deploy.js</code>가 실행이 되는데, 역시나 브라우저 실행 부분이 같은 문제라서 해당 부분을 주석 처리 후 다음과 같이 쉘 스크립트를 만들어서 처리했다.</p><pre><code class="bash"><span class="shebang">#!/bin/sh
</span>
<span class="built_in">cd</span> ./bin;./deploy.js

<span class="built_in">read</span> -p <span class="string">"open http://juhoi.github.io ? (y/n) "</span> -n <span class="number">1</span> yesno

<span class="keyword">case</span> <span class="variable">$yesno</span> <span class="keyword">in</span>
     <span class="string">"y"</span>)
          /c/Users/Administrator/AppData/Local/Google/Chrome/Application/chrome.exe http://juhoi.github.io ;;
     *)
          ;;
<span class="keyword">esac</span>

<span class="keyword">exit</span> <span class="number">0</span>
</code></pre><p>헉... 그런데, 로컬에서 문제 없던 것이 Github 에 배포하니 한글이 몽땅 깨지는 현상이 발생했다. 커밋 세시지부터 파일명까지 몽땅...
이 부분에서 가장 많은 삽질로 시간을 허비했는데... 결국은 윈도우 git 을 최신 버전으로 설치해서 해결했다. ㅡㅡ;;</p>
<h3 id="toc_78">포스팅하기</h3>
<p>마지막일 줄 알았는데 생각해보니 새 글을 작성해보지 않았다. 간단한 쉘 스크립트를 만들어 실행했다.</p><pre><code class="bash"><span class="shebang">#!/bin/sh
</span>
<span class="built_in">cd</span> ./bin;./new-post.js
</code></pre><p>끝까지 순조롭지가 않다. 템플릿 마크다운 문서를 파싱하는 과정에서 오류가 발생했다.
윈도우 플랫폼인 관계로 줄바꿈 문자를 <code>\n</code>에서 <code>\r\n</code>으로 변경하여 해결했다.
이제 마음의 안정을 찾고 폰트, 레이아웃 및 프로필 썸네일 삭제 등 약간의 테마를 변경하고 마무리했다.</p><p>또 얼마동안 방치하게 될지 모르지만, 그냥 부담갖지 말고 생각하기로 했다.</p><p>하고싶을 때 하자~!</p>
                        </div>
                        <hr />
                                            
                        <div class="row-fluid">
                            
                            <div class="pull-right">
                                <a href="/post/21세기형-장난감-라즈베리-파이-dot-dot-dot" class="btn btn-info">21세기형 장난감, 라즈베리 파이... <i class="icon-white icon-chevron-right"></i></a>
                            </div>
                            

                            
                            <div class="pull-left">
                                <a href="/post/몇년만에-다시-dot-dot-dot-study-plan" class="btn btn-info"><i class="icon-white icon-chevron-left"></i> 몇년만에 다시... Study Plan</a>
                            </div>
                            
                        </div>
                    

                        
                    </div>
                </div>
            </div>
            <div class="row">
            </div>
        </div>
        <div class="span3">
                
    <div id="author" class="well">
        <h3>About Author</h3>
        
                    <ul class=thumbnails>
                        <li>
                        <div class="thumbnail">
                            <img src="http://www.gravatar.com/avatar/efd791b43a56754702395a4c77907982?r=pg&amp;s=128.jpg&amp;d=identicon" />
                        </div>
                        </li>
                    </ul>
                    <p>
                        <strong>Juhoi Kim</strong><br/>
                        blog: <a href="http://juhoi.github.io" target="_blank">http://juhoi.github.io</a><br/>
                        twitter: <a href="http://twitter.com/ByJuhoi" target="_blank">@ByJuhoi</a><br/>
                        github: <a href="https://github.com/juhoi" target="_blank">juhoi</a>
                    </p>
                    <p>
                        <a href="https://twitter.com/ByJuhoi" class="twitter-follow-button" data-show-count="true">Follow @ByJuhoi</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    </p>
                    <p>
                        <p><strong>모든 것은 나의 선택에 달려있다.</strong></p>
                    </p>
        
    </div>
    
                        <div id="category" class="well">
                <ul class="nav nav-list">
                    <li class="nav-header">Categories</li>
                    <li class=""><a href="/category"><i class="icon-home"></i> Home</a></li>
                    
                    <li><a href="/category/raspberry pi"><i class="icon-book"></i> raspberry pi</a></li>
                    
                    <li><a href="/category/haroopress"><i class="icon-book"></i> haroopress</a></li>
                    
                    <li><a href="/category/python"><i class="icon-book"></i> python</a></li>
                    
                    <li><a href="/category/node.js"><i class="icon-book"></i> node.js</a></li>
                    
                </ul>
            </div>

            
<div id="recents" class="well">
    <ul class="nav nav-list">
        <li class="nav-header">Recent Articles</li>
    
        <li>
            <a href="/post/몇년만에-다시-dot-dot-dot-study-plan">몇년만에 다시... Study Plan
            <!--span class="label">Juhoi Kim</span--></a>
        </li>
    
        <li>
            <a href="/post/윈도우에서-하루프레스를-dot-dot-dot">윈도우에서 하루프레스를...
            <!--span class="label">Juhoi Kim</span--></a>
        </li>
    
        <li>
            <a href="/post/21세기형-장난감-라즈베리-파이-dot-dot-dot">21세기형 장난감, 라즈베리 파이...
            <!--span class="label">Juhoi Kim</span--></a>
        </li>
    
        <li>
            <a href="/post/번역]-web-scraping-in-node-dot-j-s">[번역] Web Scraping in Node.js
            <!--span class="label">Juhoi Kim</span--></a>
        </li>
    
        <li>
            <a href="/post/번역]-getting-to-know-node">[번역] Getting to Know Node
            <!--span class="label">Juhoi Kim</span--></a>
        </li>
    
    </ul>
</div>

        </div>
    </div>
    <!--<div class="row">-->
        <!--<div class="offset3 span9">-->
            <!--<strong>tags</strong> :-->
            <!---->
            <!--<a href="/tag/haroopress">haroopress</a>&nbsp;-->
            <!---->
            <!--<a href="/tag/windows">windows</a>&nbsp;-->
            <!---->
            <!--<a href="/tag/윈도우">윈도우</a>&nbsp;-->
            <!---->
        <!--</div>-->
    <!--</div>-->
</div><!-- /container -->


        <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="span12">
                    <div class="well">
                        <p class="pull-right"><a href="#">Back to top</a></p>
                            <strong>haroopress</strong> developed by <a href="http://twitter.com/rhiokim" target="_blank">@rhiokim</a>,<a href="http://twitter.com/haroopress" target="_blank">@haroopress</a> and source in <a href="https://github.com/rhiokim/haroopress" target="_blank">github</a><br/>
                            Designed and built with all the love in the world <a href="http://twitter.com/twitter" target="_blank">@twitter</a> by <a href="http://twitter.com/mdo" target="_blank">@mdo</a> and <a href="http://twitter.com/fat" target="_blank">@fat</a>.<br />
                            Code licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>. Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
                    </div>
                </div>
            </div>
        </div>
    </footer>

    
    <script type="text/javascript">
        var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-36737619-1']);
            _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>



</body>
</html>
