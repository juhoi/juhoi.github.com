<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>[번역] Accessing the File System in Node.js |  Juhoi's Haroopress</title>
    <meta name="description" content="My Blog, I love programming">
    <meta name="author" content="Juhoi Kim">
    <meta name="keywords" content="JavaScript,Node.js,Meteor" />
    <meta name="generator" content="haroopress v0.9.2" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/rss.xml" rel="alternate" title="Juhoi's Haroopress" type="application/rss+xml">

    <!-- Le styles -->
    <link rel="canonical" href="http://juhoi.github.io">

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/font-awesome.css" rel="stylesheet">
    <link href="/css/markdown.css" rel="stylesheet">
    <link href="/css/haroopress.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/code/default.css" rel="stylesheet">
    
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon-64.png">

    <!-- Le javascript -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.jsonp.js"></script>
    <script src="/js/mustache.js"></script>
    <script src="/js/apps/github.js"></script>
    <script src="/js/apps/twitter.js"></script>
</head>
<body data-spy="scroll" data-target=".subnav" data-offset="50">

        <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>

          <a class="pull-right" href="/rss.xml"><span class="icon-rss"></span></a>
          
            <a class="pull-right" href="http://twitter.com/ByJuhoi" target="_blank"><span class="icon-twitter"></span></a>
          

          <div class="nav-collapse">
            <ul class="nav">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/archives">Archives</a>
              </li>
              <li>
                <a href="/category">Categories</a>
              </li>
              <li>
                <a href="/about">About</a>
              </li>
              <!--li>
                <a href="/slides">Slides</a>
              </li-->
                
            </ul>
          </div>
        </div>
      </div>
    </div>

    
<link href="/css/code/default.css" rel="stylesheet">
<div class="container page-archive">
    <div class="row">
        <div class="span9">
            <div class="row">
                <div class="span9">
                    <div class="well bg">
                        
                        <div class="page-header">
                            <h1>[번역] Accessing the File System in Node.js</h1>
                            <span class="pull-right">Monday, December 31 2012 7:08 AM</span>
                        </div>

                        <div class="pull-right social-area">
                                                
                            <a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-text="[번역] Accessing the File System in Node.js -" data-url="http://juhoi.github.io/post/번역]-accessing-the-file-system-in-node-dot-j-s" data-via="ByJuhoi">Tweet</a>
                            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    
                                                

                            
        <div class="fb-like" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false" data-font="arial" data-href="http://juhoi.github.io/post/번역]-accessing-the-file-system-in-node-dot-j-s"></div>
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/ko_KR/all.js#xfbml=1&appId=246177242115486";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

                        </div>

                        <div class="markdown-wrapper">
                            <blockquote>
<p><em class="label label-success"><strong><i class="icon-ok-sign"></i> sitepoint.com의 Node.js 관련 Article 번역</strong></em></p>
<ol>
<li><a href="http://juhoi.github.com/post/%EB%B2%88%EC%97%AD%5D-an-introduction-to-node-dot-j-s/">[번역] An Introduction to Node.js</a></li>
<li><a href="http://juhoi.github.com/post/%EB%B2%88%EC%97%AD%5D-creating-a-http-server-in-node-dot-j-s/">[번역] Creating a HTTP Server in Node.js</a></li>
<li><a href="http://juhoi.github.com/post/%EB%B2%88%EC%97%AD%5D-http-authentication-in-node-dot-j-s/">[번역] HTTP Authentication in Node.js</a></li>
<li><a href="http://juhoi.github.com/post/%EB%B2%88%EC%97%AD%5D-cloud-deployment-of-node-dot-j-s-applications-with-nodejitsu">[번역] Cloud Deployment of Node.js Applications with Nodejitsu</a></li>
</ol>
</blockquote>
<p><em class="label label-info"><strong><i class="icon-info-sign icon-white"></i> 원문</strong></em> <a href="http://sitepoint.com/">sitepoint.com</a>의 <strong><a href="http://sitepoint.com/accessing-the-file-system-in-node-js/">Accessing the File System in Node.js</a></strong></p><p><em class="label label-warning"><strong><i class="icon-warning-sign"></i> 오역 주의</strong></em> 오역을 발견하시면 꼭 알려주세요~~ :-)</p>
<h2 id="toc_15">Accessing the File System in Node.js</h2>
<p><strong>지난 수년동안 JavaScript는 파일 시스템에 대한 접근이 아주 제한적이었다. 물론 JavaScript는 그동안 대부분이 브라우저에서만 동작을 했다. 웹 스크립팅 언어로 파일 시스템에 접근하는 것은 보안에 대한 큰 위험요소라고 간주되었다. 프론트 엔드 개발자들은 쿠키, <a href="http://www.sitepoint.com/an-overview-of-the-web-storage-api/">웹스토리지</a>, <a href="http://msdn.microsoft.com/en-us/library/aa242706(v=vs.60).aspx">엑티브엑스</a>나 기타 다른 기술들을 사용할 수 밖에 없었다. HTML5가 <a href="http://www.html5rocks.com/en/tutorials/file/filesystem/">파일 시스템 API</a>에 대해 다루었지만 <a href="http://caniuse.com/filesystem">크롬 이외에는 대부분 여전히 지원</a>되지 않는다. Node.js의 출현으로 JavaScript는 적합한 서버측 언어로써 발판을 확보하기 시작했다. 서버에서의 파일 시스템 접근은 일반적인 일로 API에 대해서 훨씬 덜 고민하게 한다.</strong></p>
<h3 id="toc_16">The File System Module</h3>
<p>기본적으로 Node.js 설치 시 파일 시스템 모듈인 <a href="http://nodejs.org/api/fs.html">fs</a>도 같이 설치된다. <code>fs</code> 모듈은 대부분 단순하게 표준 파일 작업에 대한 래퍼를 제공한다. 다음의 예제에서는 파일의 내용을 메모리로 읽기 위해 파일 시스템 모듈을 사용한다. 우선 1 라인에서 파일 시스템 모듈을 임포트 하고 3 라인에서는 <code>exist()</code> 함수가 <code>“foo.txt”</code> 파일의 존재 여부를 확인한다. <code>exists()</code>의 콜백 함수는 파일의 존재 여부를 명시한 불리언 값을 인자로 받는다. 그 다음의 <code>stat()</code> 함수는 파일의 길이를 바이트 단위로 확인하기 위해 사용된다. 이 정보가 중요한데 그 이유는 그것으로 인해 우리가 읽어야 할 데이터양을 알수 있기 때문이다.</p><p>다음으로 <code>open()</code>을 사용해서 파일을 여는데 여기에서 <code>r</code> 인자는 파일이 읽기 전용으로 열린다는 것을 의미한다. <code>open()</code>의 콜백 함수는 새로 연 파일을 접근하기 위한 <a href="http://en.wikipedia.org/wiki/File_descriptor">파일 디스크립터</a>인 <code>fd</code>를 제공한다. 콜백 함수 안에서 우리는 파일의 내용을 담아둘 버퍼를 정의한다. 버퍼의 크기가 <code>stats.size</code>에 저장되어 있는 파일의 크기로 초기화 됐다는 것을 주목해라. 그 다음, 파일은 <code>read()</code> 함수를 사용해서 버퍼로 읽어 들인다. 버퍼는 이제 파일로부터 읽어들인 로우 데이터를 포함하고 있다. 데이터를 표시하기 위해서는 먼저 UTF-8로 인코딩된 스트링으로 변환을 해야 한다. 마지막으로 파일 내용을 콘솔에 출력하고 파일을 닫는다.</p><pre><code class="javascript">var fs = require(<span class="string">"fs"</span>);
var fileName = <span class="string">"foo.txt"</span>;
<span class="transposed_variable">fs.</span><span class="built_in">exists</span>(fileName, <span class="function"><span class="keyword">function</span><span class="params">(exists)</span> {</span>
  <span class="keyword">if</span> (<span class="built_in">exists</span>) {
    <span class="transposed_variable">fs.</span>stat(fileName, <span class="function"><span class="keyword">function</span><span class="params">(error, stats)</span> {</span>
      <span class="transposed_variable">fs.</span>open(fileName, <span class="string">"r"</span>, <span class="function"><span class="keyword">function</span><span class="params">(error, fd)</span> {</span>
        var buffer = new Buffer(<span class="transposed_variable">stats.</span><span class="built_in">size</span>);
        <span class="transposed_variable">fs.</span>read(fd, buffer, <span class="number">0</span>, <span class="transposed_variable">buffer.</span><span class="built_in">length</span>, null, <span class="function"><span class="keyword">function</span><span class="params">(error, bytesRead, buffer)</span> {</span>
          var data = <span class="transposed_variable">buffer.</span>toString(<span class="string">"utf8"</span>, <span class="number">0</span>, <span class="transposed_variable">buffer.</span><span class="built_in">length</span>);
          <span class="transposed_variable">console.</span>log(data);
          <span class="transposed_variable">fs.</span>close(fd);
        });
      });
    });
  }
});
</code></pre>
<h3 id="toc_17">Synchronous Functions</h3>
<p>문서들을 살펴볼 때 많은 함수들의 이름 끝이 <code>Sync</code>로 되어 있는 것을 주의해야 한다. 이것들은 동기화 함수를 나타낸다(Node.js의 콜백 기반에서는 다소 드문...). 동기화 함수는 편의성을 위해 제공한다. 예를 들어, Node.js로 작성된 간단한 배치 스크립트는 성능 최적화에 대해 고민할 필요는 없다. 또한, 동기화 함수는 프로그램이 초기화되는 동안 특정 파일들을 로딩하는 데 유용하다. 하지만, 실제 운영중인 서버 애플리케이션에서의 동기화 함수는 Node의 싱글 스레드 실행으로 인한 지연에 의해 심각한 성능 저하의 가능성이 있다.</p><p>다음 예제들은 동기적 또는 비동기적으로 어떻게 파일을 메모리로 읽는지를 보여준다. 위의 파일을 읽는 예제는 솔직히 조금 복잡하다. 이번의 예제는 한번의 함수 호출로 전체 파일을 읽는 <code>readFile()</code> 함수를 사용한다. <code>readFile()</code>의 처음 두 인자는 파일 이름과 파일의 인코딩이다. Node.js 관례에 따라 마지막 인자는 콜백 함수이다. 콜백 함수의 인자로는 <code>error</code> 정보와 파일의 내용을 제공한다.</p><pre><code class="javascript"><span class="keyword">var</span> fs = <span class="keyword">require</span>(<span class="string">"fs"</span>);
fs.readFile(<span class="string">"foo.txt"</span>, <span class="string">"utf8"</span>, <span class="function"><span class="keyword">function</span><span class="params">(error, data)</span> {</span>
  console.log(data);
});
</code></pre><p>다음 예제는 <code>readFileSync()</code>를 사용해서 위와 동일한 작업을 동기적으로 수행한다. 동기화 코드는 조금 더 가독성이 있지만, 비동기화 코드와 같은 확장성을 제공하지 못한다.</p><pre><code class="javascript"><span class="built_in">var</span> fs <span class="subst">=</span> <span class="keyword">require</span>(<span class="string">"fs"</span>);
<span class="built_in">var</span> <span class="built_in">data</span> <span class="subst">=</span> fs<span class="built_in">.</span>readFileSync(<span class="string">"foo.txt"</span>, <span class="string">"utf8"</span>);
console<span class="built_in">.</span><span class="keyword">log</span>(<span class="built_in">data</span>);
</code></pre>
<h3 id="toc_18">Watching Files</h3>
<p>파일 시스템 모듈은 프로그램이 특정 파일들의 변경사항을 관찰할 수 있게 한다. 이것은 소스 코드가 수정되면 프로그램을 자동으로 재시작 시켜주는 <a href="https://github.com/remy/nodemon">nodemon</a>과 같은 프로그램에게는 매우 유용하다. 다음 예제는 <code>“foo.txt”</code>라는 파일을 관찰한다. 파일이 수정되면 콘솔에 이벤트에 대한 정보를 출력한다.</p><pre><code class="javascript"><span class="keyword">var</span> fs = <span class="keyword">require</span>(<span class="string">"fs"</span>);
<span class="keyword">var</span> fileName = <span class="string">"foo.txt"</span>;
fs.watch(fileName, {
  persistent: <span class="keyword">true</span>
}, <span class="function"><span class="keyword">function</span><span class="params">(event, filename)</span> {</span>
  console.log(event + <span class="string">" event occurred on "</span> + filename);
});
</code></pre><p><code>watch()</code> 함수는 세개의 인자를 받는다. 첫번째 인자는 관찰하기 위한 파일의 이름이다. 두번째 인자는 선택사항으로 구성 설정을 제공하는데, 위 예제에서는 <code>persistent</code>라는 이름의 불리언 값을 포함하는 객체이어야 한다. <code>persistent</code> 값이 <code>true</code>이면 프로그램이 종료되지 않는다. 만약 두번째 인자가 생략된다면 기본으로 <code>true</code>로 설정된다. 마지막 인자는 목표가 되는 파일이 수정될 때 트리거되는 콜백 함수이다. 콜백에는 이벤트 유형(change, rename 등)과 파일의 이름을 전달한다. <code>watch()</code>가 기본 OS에 의존적이어서 모든 시스템에서 작동하지는 않을 수 있다는 것을 알고 있어야 한다. <code>watch()</code>를 사용할 수 없다면 대신에 속도가 느린 <code>watchFile()</code>을 사용할 수는 있다.</p>
<h3 id="toc_19">Conclusion</h3>
<p>이 글은 파일 시스템 모듈에 대해 매우 높은 수준에서 소개했다. 그 모듈은 하나의 글에서 소개하기에는 너무 많은 약 50개가 넘는 함수를 포함하고 있다. 예를 들어 이글에서는 파일을 읽는 부분만을 다룰 뿐, 파일을 쓰는 부분에 대해서는 완전히 배제하였다. 더 깊이 이해하기 위해서는 모듈에 관한 문서를 찾아보기 바란다. 그리고, 동기화 함수는 아주아주 조심히 사용해야 한다는 것을 기억해라!</p>
                        </div>
                        <hr />
                                            
                        <div class="row-fluid">
                            
                            <div class="pull-right">
                                <a href="/post/번역]-cloud-deployment-of-node-dot-j-s-applications-with-nodejitsu" class="btn btn-info">[번역] Cloud Deployment of Node.js Applications with Nodejitsu <i class="icon-white icon-chevron-right"></i></a>
                            </div>
                            

                            
                            <div class="pull-left">
                                <a href="/post/번역]-making-http-requests-in-node-dot-j-s" class="btn btn-info"><i class="icon-white icon-chevron-left"></i> [번역] Making HTTP Requests in Node.js</a>
                            </div>
                            
                        </div>
                    

                        
    <div class="row-fluid">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'haroo-juhoi'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

                    </div>
                </div>
            </div>
            <div class="row">
            </div>
        </div>
        <div class="span3">
                
    <div id="author" class="well">
        <h3>About Author</h3>
        
                    <ul class=thumbnails>
                        <li>
                        <div class="thumbnail">
                            <img src="http://www.gravatar.com/avatar/efd791b43a56754702395a4c77907982?r=pg&amp;s=128.jpg&amp;d=identicon" />
                        </div>
                        </li>
                    </ul>
                    <p>
                        <strong>Juhoi Kim</strong><br/>
                        blog: <a href="http://juhoi.github.io" target="_blank">http://juhoi.github.io</a><br/>
                        twitter: <a href="http://twitter.com/ByJuhoi" target="_blank">@ByJuhoi</a><br/>
                        github: <a href="https://github.com/juhoi" target="_blank">juhoi</a>
                    </p>
                    <p>
                        <a href="https://twitter.com/ByJuhoi" class="twitter-follow-button" data-show-count="true">Follow @ByJuhoi</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    </p>
                    <p>
                        <p><strong>모든 것은 나의 선택에 달려있다.</strong></p>
                    </p>
        
    </div>
    
                        <div id="category" class="well">
                <ul class="nav nav-list">
                    <li class="nav-header">Categories</li>
                    <li class=""><a href="/category"><i class="icon-home"></i> Home</a></li>
                    
                    <li><a href="/category/raspberry pi"><i class="icon-book"></i> raspberry pi</a></li>
                    
                    <li><a href="/category/haroopress"><i class="icon-book"></i> haroopress</a></li>
                    
                    <li><a href="/category/node.js"><i class="icon-book"></i> node.js</a></li>
                    
                </ul>
            </div>

            
<div id="recents" class="well">
    <ul class="nav nav-list">
        <li class="nav-header">Recent Articles</li>
    
        <li>
            <a href="/post/윈도우에서-하루프레스를-dot-dot-dot">윈도우에서 하루프레스를...
            <!--span class="label">Juhoi Kim</span--></a>
        </li>
    
        <li>
            <a href="/post/21세기형-장난감-라즈베리-파이-dot-dot-dot">21세기형 장난감, 라즈베리 파이...
            <!--span class="label">Juhoi Kim</span--></a>
        </li>
    
        <li>
            <a href="/post/번역]-web-scraping-in-node-dot-j-s">[번역] Web Scraping in Node.js
            <!--span class="label">Juhoi Kim</span--></a>
        </li>
    
        <li>
            <a href="/post/번역]-getting-to-know-node">[번역] Getting to Know Node
            <!--span class="label">Juhoi Kim</span--></a>
        </li>
    
        <li>
            <a href="/post/번역]-making-http-requests-in-node-dot-j-s">[번역] Making HTTP Requests in Node.js
            <!--span class="label">Juhoi Kim</span--></a>
        </li>
    
    </ul>
</div>

        </div>
    </div>
    <!--<div class="row">-->
        <!--<div class="offset3 span9">-->
            <!--<strong>tags</strong> :-->
            <!---->
            <!--<a href="/tag/node">node</a>&nbsp;-->
            <!---->
            <!--<a href="/tag/node.js">node.js</a>&nbsp;-->
            <!---->
        <!--</div>-->
    <!--</div>-->
</div><!-- /container -->


        <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="span12">
                    <div class="well">
                        <p class="pull-right"><a href="#">Back to top</a></p>
                            <strong>haroopress</strong> developed by <a href="http://twitter.com/rhiokim" target="_blank">@rhiokim</a>,<a href="http://twitter.com/haroopress" target="_blank">@haroopress</a> and source in <a href="https://github.com/rhiokim/haroopress" target="_blank">github</a><br/>
                            Designed and built with all the love in the world <a href="http://twitter.com/twitter" target="_blank">@twitter</a> by <a href="http://twitter.com/mdo" target="_blank">@mdo</a> and <a href="http://twitter.com/fat" target="_blank">@fat</a>.<br />
                            Code licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>. Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
                    </div>
                </div>
            </div>
        </div>
    </footer>

    
    <script type="text/javascript">
        var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-36737619-1']);
            _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>



</body>
</html>
